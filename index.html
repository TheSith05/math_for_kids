<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –¥–ª—è –¥–µ—Ç–µ–π</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-green-200">
  <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: —Ñ–æ–Ω –≥—Ä–∞–¥–∏–µ–Ω—Ç, –æ—Ç—Å—Ç—É–ø—ã (p-2 –º–æ–±–∏–ª—å–Ω—ã–π, sm:p-4 –¥–µ—Å–∫—Ç–æ–ø), min-h-screen –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è -->
  <div class="min-h-screen p-2 sm:p-4 flex flex-col items-center bg-gradient-to-b from-blue-200 to-green-200">
    <!-- –ö–Ω–æ–ø–∫–∏ —É—Ä–æ–≤–Ω–µ–π: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å–µ—Ç–∫–∞, gap-4 -->
    <div class="grid gap-4 mb-4" id="level-buttons">
      <button
        class="px-4 py-2 rounded-full text-white font-bold bg-blue-600 hover:bg-blue-500 transition-transform transform hover:scale-105"
        data-level="1">–£—Ä–æ–≤–µ–Ω—å 1</button>
      <button
        class="px-4 py-2 rounded-full text-white font-bold bg-blue-400 hover:bg-blue-500 transition-transform transform hover:scale-105"
        data-level="2">–£—Ä–æ–≤–µ–Ω—å 2</button>
      <button
        class="px-4 py-2 rounded-full text-white font-bold bg-blue-400 hover:bg-blue-500 transition-transform transform hover:scale-105"
        data-level="3">–£—Ä–æ–≤–µ–Ω—å 3</button>
      <button
        class="px-4 py-2 rounded-full text-white font-bold bg-blue-400 hover:bg-blue-500 transition-transform transform hover:scale-105"
        data-level="4">–£—Ä–æ–≤–µ–Ω—å 4</button>
      <button
        class="px-4 py-2 rounded-full text-white font-bold bg-blue-400 hover:bg-blue-500 transition-transform transform hover:scale-105"
        data-level="5">–£—Ä–æ–≤–µ–Ω—å 5</button>
    </div>

    <!-- FAQ –∫–Ω–æ–ø–∫–∞: –∑–Ω–∞–∫ –≤–æ–ø—Ä–æ—Å–∞ –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É -->
    <div id="faq-button" class="absolute top-4 left-4 text-2xl cursor-pointer">‚ùì</div>
    <!-- FAQ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div id="faq-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white p-6 rounded-lg max-w-md w-full">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-2xl font-bold">–û –∏–≥—Ä–µ</h2>
          <span id="faq-close" class="text-xl cursor-pointer">‚úñ</span>
        </div>
        <p class="mb-2"><strong>–£—Ä–æ–≤–µ–Ω—å 1:</strong> –ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–∏–º–µ—Ä—ã (1‚Äì10), —Å–ª–æ–∂–µ–Ω–∏–µ –∏ –≤—ã—á–∏—Ç–∞–Ω–∏–µ, –±–µ–∑ —Ä–∞–∑–ª–æ–∂–µ–Ω–∏–π.</p>
        <p class="mb-2"><strong>–£—Ä–æ–≤–µ–Ω—å 2:</strong> –ß–∏—Å–ª–∞ 1‚Äì20, —Å–ª–æ–∂–µ–Ω–∏–µ –∏ –≤—ã—á–∏—Ç–∞–Ω–∏–µ, —Ä–∞–∑–ª–æ–∂–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ —á–∏—Å–ª–∞.</p>
        <p class="mb-2"><strong>–£—Ä–æ–≤–µ–Ω—å 3:</strong> –¢—Ä–∏ —á–∏—Å–ª–∞ (1‚Äì20, 1‚Äì10), –¥–≤–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, —Ä–∞–∑–ª–æ–∂–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ —á–∏—Å–ª–∞.</p>
        <p class="mb-2"><strong>–£—Ä–æ–≤–µ–Ω—å 4:</strong> –ß–∏—Å–ª–∞ 1‚Äì20, —Ä–∞–∑–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ 10.</p>
        <p class="mb-2"><strong>–£—Ä–æ–≤–µ–Ω—å 5:</strong> –¢—Ä–∏ —á–∏—Å–ª–∞, —Ä–∞–∑–ª–æ–∂–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ —á–∏—Å–ª–∞, —Å–ª–æ–∂–µ–Ω–∏–µ/–≤—ã—á–∏—Ç–∞–Ω–∏–µ.</p>
        <p class="mt-4"><strong>–ù–æ–≤–∞—è –∏–≥—Ä–∞:</strong> –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ <code>250989</code> –∏ –Ω–∞–∂–º–∏—Ç–µ "–í–≤–æ–¥" –¥–ª—è —Å–±—Ä–æ—Å–∞
          –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.</p>
      </div>
    </div>
    <!-- –°—á–µ—Ç—á–∏–∫ –∑–≤–µ–∑–¥: –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å -->
    <div id="star-count" class="absolute top-4 right-4 text-2xl font-bold">‚≠ê 0</div>

    <!-- –ü–µ—Ä—Å–æ–Ω–∞–∂: –∫–æ—Ç–∏–∫ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–∞ -->
    <div id="cat" class="text-6xl mb-4">üò∫</div>

    <!-- –ü—Ä–∏–º–µ—Ä: –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, font-size: 36px –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ -->
    <div id="example" class="text-4xl font-bold mb-4" style="font-size: 36px;"></div>

    <!-- –û—Ç–≤–µ—Ç: –ø–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –æ—Ç–≤–µ—Ç–∞, mt-8 –¥–ª—è —Å–º–µ—â–µ–Ω–∏—è –Ω–∏–∂–µ -->
    <div id="answer" class="text-2xl mt-8 mb-4">–û—Ç–≤–µ—Ç: </div>

    <!-- –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞: w-80 —à–∏—Ä–∏–Ω–∞, gap-2 –º–µ–∂–¥—É –∫–Ω–æ–ø–∫–∞–º–∏ -->
    <div class="grid grid-cols-3 gap-2 w-80" id="input-buttons">
      <button
        class="bg-yellow-400 hover:bg-yellow-500 text-3xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105">1</button>
      <button
        class="bg-yellow-400 hover:bg-yellow-500 text-3xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105">2</button>
      <button
        class="bg-yellow-400 hover:bg-yellow-500 text-3xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105">3</button>
      <button
        class="bg-yellow-400 hover:bg-yellow-500 text-3xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105">4</button>
      <button
        class="bg-yellow-400 hover:bg-yellow-500 text-3xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105">5</button>
      <button
        class="bg-yellow-400 hover:bg-yellow-500 text-3xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105">6</button>
      <button
        class="bg-yellow-400 hover:bg-yellow-500 text-3xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105">7</button>
      <button
        class="bg-yellow-400 hover:bg-yellow-500 text-3xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105">8</button>
      <button
        class="bg-yellow-400 hover:bg-yellow-500 text-3xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105">9</button>
      <button
        class="bg-yellow-400 hover:bg-yellow-500 text-3xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105">0</button>
      <button id="submit"
        class="bg-green-500 hover:bg-green-600 text-white text-2xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105 flex justify-center items-center">–í–≤–æ–¥</button>
      <button id="clear"
        class="bg-red-500 hover:bg-red-600 text-white text-xl font-bold p-6 rounded-lg transition-transform transform hover:scale-105 flex justify-center items-center">–û—á–∏—Å—Ç–∏—Ç—å</button>
    </div>

    <script>
      let level = 1;
      let example = {};
      let answer = '';
      let stars = localStorage.getItem('stars') || 0;
      let correctCount = 0;

      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ—Ä–∞
      function generateExample() {
        let num1, num2, num3, op1, op2, result, decomposition;
        if (level === 1) {
          num1 = Math.floor(Math.random() * 10) + 1; // 1-10
          op1 = Math.random() > 0.5 ? '+' : '-';
          num2 = Math.floor(Math.random() * (op1 === '-' ? num1 : 10 - num1)) + 1; // 1 to num1 (–≤—ã—á–∏—Ç–∞–Ω–∏–µ) –∏–ª–∏ 10-num1 (—Å–ª–æ–∂–µ–Ω–∏–µ)
          result = op1 === '+' ? num1 + num2 : num1 - num2;
          if (result > 10) return generateExample();
        } else if (level === 2) {
          num1 = Math.floor(Math.random() * 20) + 1; // 1-20
          op1 = Math.random() > 0.5 ? '+' : '-';
          num2 = Math.floor(Math.random() * (op1 === '-' ? num1 : 10)) + 1; // 1 to num1 (–≤—ã—á–∏—Ç–∞–Ω–∏–µ) –∏–ª–∏ 10 (—Å–ª–æ–∂–µ–Ω–∏–µ)
          result = op1 === '+' ? num1 + num2 : num1 - num2;
          if (result > 20) return generateExample();
          decomposition = decomposeNumber(num2, op1, num1);
        } else if (level === 3) {
          num1 = Math.floor(Math.random() * 20) + 1; // 1-20
          op1 = Math.random() > 0.5 ? '+' : '-';
          num2 = Math.floor(Math.random() * (op1 === '-' ? num1 : 10)) + 1; // 1 to num1 (–≤—ã—á–∏—Ç–∞–Ω–∏–µ) –∏–ª–∏ 10 (—Å–ª–æ–∂–µ–Ω–∏–µ)
          const tempResult = op1 === '+' ? num1 + num2 : num1 - num2;
          if (tempResult < 0) return generateExample();
          num3 = Math.floor(Math.random() * 10) + 1; // 1-10
          op2 = Math.random() > 0.5 ? '+' : '-';
          result = op2 === '+' ? tempResult + num3 : tempResult - num3;
          if (result > 20) return generateExample();
          decomposition = decomposeNumber(num2, op1, num1);
        } else if (level === 4) {
          op1 = Math.random() > 0.5 ? '+' : '-';
          if (op1 === '-') {
            num1 = Math.floor(Math.random() * 10) + 11; // 11-20
            const part1 = num1 - 10; // 1-10
            const part2 = Math.floor(Math.random() * (10 - part1)) + 1; // 1 to 10-part1
            num2 = part1 + part2; // 2-10
            result = num1 - num2;
          } else {
            num1 = Math.floor(Math.random() * 9) + 1; // 1-9
            const part1 = 10 - num1; // 1-9
            const part2 = Math.floor(Math.random() * (10 - part1)) + 1; // 1 to 10-part1
            num2 = part1 + part2; // 2-10
            result = num1 + num2;
          }
          if (result > 20) return generateExample();
          decomposition = decomposeNumber(num2, op1, num1);
          if (!decomposition) return generateExample(); // –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å—ã
        } else if (level === 5) {
          op1 = Math.random() > 0.5 ? '+' : '-';
          if (op1 === '-') {
            num1 = Math.floor(Math.random() * 10) + 11; // 11-20
            const part1 = num1 - 10; // 1-10
            const part2 = Math.floor(Math.random() * (10 - part1)) + 1; // 1 to 10-part1
            num2 = part1 + part2; // 2-10
            const tempResult = num1 - num2;
            num3 = Math.floor(Math.random() * 10) + 1; // 1-10
            op2 = Math.random() > 0.5 ? '+' : '-';
            result = op2 === '+' ? tempResult + num3 : tempResult - num3;
          } else {
            num1 = Math.floor(Math.random() * 9) + 1; // 1-9
            const part1 = 10 - num1; // 1-9
            const part2 = Math.floor(Math.random() * (10 - part1)) + 1; // 1 to 10-part1
            num2 = part1 + part2; // 2-10
            const tempResult = num1 + num2;
            num3 = Math.floor(Math.random() * 10) + 1; // 1-10
            op2 = Math.random() > 0.5 ? '+' : '-';
            result = op2 === '+' ? tempResult + num3 : tempResult - num3;
          }
          if (result > 20) return generateExample();
          decomposition = decomposeNumber(num2, op1, num1);
          if (!decomposition) return generateExample(); // –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å—ã
        }
        if (result < 0) return generateExample();
        return { num1, num2, num3, op1, op2, result, decomposition };
      }

      /// –†–∞–∑–ª–æ–∂–µ–Ω–∏–µ —á–∏—Å–ª–∞
      function decomposeNumber(num, op1, num1) {
        if (num <= 1) return null;
        if (op1 === '-') {
          const part1 = num1 - 10; // –î–æ–≤–æ–¥–∏–º num1 –¥–æ 10
          if (part1 <= 0 || part1 >= num) return null;
          const part2 = num - part1;
          if (part2 <= 0) return null;
          return [part1, part2];
        } else if (op1 === '+') {
          const part1 = 10 - num1; // –î–æ–≤–æ–¥–∏–º num1 –¥–æ 10
          if (part1 <= 0 || part1 >= num || num1 + num < 10) return null;
          const part2 = num - part1;
          if (part2 <= 0) return null;
          return [part1, part2];
        }
        return null; // –ù–∞ –±—É–¥—É—â–µ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–º–Ω–æ–∂–µ–Ω–∏–µ)
      }

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
      function updateExample() {
        example = generateExample();
        const exampleDiv = document.getElementById('example');
        exampleDiv.innerHTML = `
  ${example.num1} ${example.op1} <span id="num2" class="inline-block ${example.decomposition ? 'text-gray-400' : 'text-black'}">${example.num2}</span>
  ${level === 3 || level === 5 ? ` ${example.op2} ${example.num3}` : ''} = ?
`;
        // –î–æ–±–∞–≤–ª—è—Ç—å "–õ" –∏ —Å–ª–∞–≥–∞–µ–º—ã–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Ä–∞–∑–ª–æ–∂–µ–Ω–∏–µ (num2 > 1)
        if (level >= 2 && example.decomposition) {
          exampleDiv.innerHTML += `
          <div class="flex justify-center mt-2">
            <div class="flex flex-col items-center">
              <svg id="brace" width="100" height="50" viewBox="0 0 100 50" class="mt-0" style="position: absolute; transform: scale(1.2);">
                <defs>
                  <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color: #ff6b6b; stop-opacity: 1" />
                    <stop offset="100%" style="stop-color: #ffcc00; stop-opacity: 1" />
                  </linearGradient>
                </defs>
                <polyline points="30,40 50,17 70,40" fill="none" stroke="url(#grad)" stroke-width="4" filter="drop-shadow(2px 2px 2px rgba(0,0,0,0.3))" />
              </svg>
              <span id="decomp1" class="text-xl font-bold decomp" style="position: absolute;">${example.decomposition[0]}</span>
              <span id="decomp2" class="text-xl font-bold decomp" style="position: absolute;">${example.decomposition[1]}</span>
            </div>
          </div>
        `;
        }
        positionBrace();
        if (level >= 2 && example.decomposition) {
          gsap.fromTo('#brace', { scaleY: 0, opacity: 0 }, { scaleY: 1.2, opacity: 1, duration: 0.5, ease: 'bounce' });
          gsap.fromTo('.decomp', { opacity: 0, y: 10 }, { opacity: 1, y: 0, duration: 0.5, delay: 0.3 });
        }
      }

      // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ SVG –∏ —Å–ª–∞–≥–∞–µ–º—ã—Ö
      function positionBrace() {
        if (level === 1 || !example.decomposition) return;
        const num2 = document.getElementById('num2');
        const exampleDiv = document.getElementById('example');
        const brace = document.getElementById('brace');
        const decomp1 = document.getElementById('decomp1');
        const decomp2 = document.getElementById('decomp2');
        const num2Rect = num2.getBoundingClientRect();
        const exampleRect = exampleDiv.getBoundingClientRect();
        const svgWidth = 120; // 100 * scale(1.2)
        // –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ SVG –ø–æ–¥ num2 –æ—Ç (0,0) –æ–∫–Ω–∞
        const exampleLeft = (window.innerWidth - exampleRect.width) / 2;
        // *** –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–æ—Ä–º—É–ª—É num2CenterX –¥–ª—è –ø–æ–¥–≥–æ–Ω–∫–∏ —Ü–µ–Ω—Ç—Ä–∞ num2 ***
        // –ù–∞–ø—Ä–∏–º–µ—Ä: +2 –¥–ª—è —Å–º–µ—â–µ–Ω–∏—è –≤–ø—Ä–∞–≤–æ, -3 –≤–ª–µ–≤–æ
        const num2CenterX = num2Rect.left + num2Rect.width;
        // *** –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –¥–ª—è –¥–≤—É–∑–Ω–∞—á–Ω—ã—Ö —á–∏—Å–µ–ª (num2 >= 10) ***
        // –ü–æ–¥—Å—Ç—Ä–æ–π—Ç–µ: -7, -10 (–≤–ª–µ–≤–æ), +3 (–≤–ø—Ä–∞–≤–æ)
        const adjustment = num2.textContent.length > 1 && window.innerWidth < 640 ? -7 : num2.textContent.length > 1 ? -5 : 0;
        const svgLeft = num2CenterX + adjustment - svgWidth / 2;
        brace.style.left = `${svgLeft}px`;
        // –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ "–õ"
        // num2Top + 50 –¥–ª—è –æ–ø—É—Å–∫–∞–Ω–∏—è –≤–µ—Ä—à–∏–Ω—ã (–±—ã–ª–æ +45, y=193px, —Ç–µ–ø–µ—Ä—å ~198px)
        // y=17 –≤ SVG = 20.4px (17/50 * 60px)
        const num2Top = num2Rect.top;
        const desiredTop = num2Top + 50;
        brace.style.top = `${desiredTop - 20.4}px`;
        // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–∞–≥–∞–µ–º—ã—Ö –ø–æ–¥ –∫–æ–Ω—Ü–∞–º–∏ "–õ"
        const braceRect = brace.getBoundingClientRect();
        // 36px = 30/100 * 120px (–ª–µ–≤—ã–π –∫–æ–Ω–µ—Ü), –ø–æ–¥—Å—Ç—Ä–æ–π—Ç–µ: +2, -2
        decomp1.style.left = `${braceRect.left + 30}px`;
        // 84px = 70/100 * 120px (–ø—Ä–∞–≤—ã–π –∫–æ–Ω–µ—Ü)
        decomp2.style.left = `${braceRect.left + 78}px`;
        // 48px = 40/50 * 60px (y=40 –≤ SVG), –ø–æ–¥—Å—Ç—Ä–æ–π—Ç–µ –¥–ª—è –æ–ø—É—Å–∫–∞–Ω–∏—è
        decomp1.style.top = `${braceRect.top + 48}px`;
        decomp2.style.top = `${braceRect.top + 48}px`;
      }

      // –û–±—Ä–∞–±–æ—Ç–∫–∞ FAQ
      document.getElementById('faq-button').addEventListener('click', () => {
        document.getElementById('faq-modal').classList.toggle('hidden');
      });
      document.getElementById('faq-close').addEventListener('click', () => {
        document.getElementById('faq-modal').classList.add('hidden');
      });

      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞
      document.getElementById('input-buttons').addEventListener('click', (event) => {
        if (event.target.tagName !== 'BUTTON') return;
        const value = event.target.textContent;
        if (value === '–í–≤–æ–¥') {
          if (codeInput === '250989') {
            localStorage.clear();
            stars = 0;
            correctCount = 0;
            document.getElementById('star-count').textContent = `‚≠ê 0`;
            document.getElementById('cat').textContent = 'üò∫';
            gsap.to('#cat', { 
            scale: 1.5, 
            rotation: 360, 
            duration: 1, 
            ease: 'elastic',
            onComplete: () => {
              gsap.to('#cat', { scale: 1, duration: 0.3 });
              document.getElementById('avatar-modal').classList.remove('hidden');
              gsap.fromTo('#avatar-modal > div', { scale: 0.8, opacity: 0 }, { scale: 1, opacity: 1, duration: 0.3 });
            }
          });
            codeInput = '';
            answer = '';
            document.getElementById('answer').textContent = '–û—Ç–≤–µ—Ç: ';
            updateExample();
          } else if (!isNaN(parseInt(answer)) && parseInt(answer) === example.result) {
            document.getElementById('cat').textContent = 'üò∏';
            gsap.to('#cat', { y: -30, scale: 1.2, duration: 0.5, yoyo: true, repeat: 1 });
            stars++;
            localStorage.setItem('stars', stars);
            document.getElementById('star-count').textContent = `‚≠ê ${stars}`;
            gsap.to('#star-count', { scale: 1.2, duration: 0.3, yoyo: true, repeat: 1 });
            correctCount++;
            if (correctCount >= 10) {
              gsap.to('#cat', { scale: 1.5, rotation: 360, duration: 1, ease: 'elastic' });
              correctCount = 0;
            }
            setTimeout(() => {
              document.getElementById('cat').textContent = 'üò∫';
              answer = '';
              codeInput = '';
              document.getElementById('answer').textContent = '–û—Ç–≤–µ—Ç: ';
              updateExample();
            }, 1000);
          } else {
            document.getElementById('cat').textContent = codeInput.length >= 6 ? 'ü§î' : 'üòø';
            gsap.to('#cat', {
              x: codeInput.length >= 6 ? 0 : -15,
              rotation: codeInput.length >= 6 ? -5 : 5,
              duration: 0.2,
              yoyo: true,
              repeat: codeInput.length >= 6 ? 2 : 3
            });
            setTimeout(() => {
              document.getElementById('cat').textContent = 'üò∫';
              answer = '';
              codeInput = '';
              document.getElementById('answer').textContent = '–û—Ç–≤–µ—Ç: ';
            }, 1000);
          }
        } else if (value === '–û—á–∏—Å—Ç–∏—Ç—å') {
          answer = '';
          codeInput = '';
          document.getElementById('answer').textContent = '–û—Ç–≤–µ—Ç: ';
        } else {
          answer += value;
          codeInput += value;
          document.getElementById('answer').textContent = `–û—Ç–≤–µ—Ç: ${answer}`;
        }
      });

      // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Ä–æ–≤–Ω–µ–π
      document.getElementById('level-buttons').addEventListener('click', (event) => {
        if (event.target.tagName !== 'BUTTON') return;
        level = parseInt(event.target.dataset.level);
        document.querySelectorAll('#level-buttons button').forEach(btn => {
          btn.classList.remove('bg-blue-600');
          btn.classList.add('bg-blue-400');
        });
        event.target.classList.remove('bg-blue-400');
        event.target.classList.add('bg-blue-600');
        answer = '';
        codeInput = '';
        document.getElementById('answer').textContent = '–û—Ç–≤–µ—Ç: ';
        updateExample();
      });

      // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ –∫–Ω–æ–ø–æ–∫
      function updateButtonLayout() {
        const container = document.getElementById('level-buttons');
        const buttons = container.querySelectorAll('button');
        const containerWidth = container.getBoundingClientRect().width;
        const buttonWidth = buttons[0].getBoundingClientRect().width;
        const gap = 16; // gap-4 = 16px
        const maxButtonsPerRow = Math.floor((containerWidth + gap) / (buttonWidth + gap));

        // –û—á–∏—Å—Ç–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∞—Å—Å—ã —Å–µ—Ç–∫–∏
        container.classList.remove('grid-cols-1', 'grid-cols-2', 'grid-cols-4', 'grid-cols-5');
        buttons.forEach(btn => {
          btn.classList.remove('col-span-2', 'col-span-1');
        });

        if (buttons.length === 4) {
          if (window.innerWidth < 640) {
            // –°–º–∞—Ä—Ç—Ñ–æ–Ω—ã: 2-1-1
            container.classList.add('grid-cols-2');
            buttons[2].classList.add('col-span-2'); // –£—Ä–æ–≤–µ–Ω—å 3 –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É
            buttons[3].classList.add('col-span-2'); // –£—Ä–æ–≤–µ–Ω—å 4 –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É
          } else {
            // –î–µ—Å–∫—Ç–æ–ø—ã: 4 –≤ —Å—Ç—Ä–æ–∫–µ
            container.classList.add('grid-cols-4');
          }
        } else if (buttons.length === 5) {
          if (window.innerWidth < 640) {
            // –°–º–∞—Ä—Ç—Ñ–æ–Ω—ã: 2-2-1
            container.classList.add('grid-cols-2');
            buttons[4].classList.add('col-span-2'); // –£—Ä–æ–≤–µ–Ω—å 5 –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É
          } else {
            // –î–µ—Å–∫—Ç–æ–ø—ã: 5 –≤ —Å—Ç—Ä–æ–∫–µ
            container.classList.add('grid-cols-5');
          }
        }
      }

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
      document.getElementById('star-count').textContent = `‚≠ê ${stars}`;
      updateExample();
      updateButtonLayout();

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞
      window.addEventListener('resize', () => {
        positionBrace();
        updateButtonLayout();
      });
    </script>
</body>

</html>
